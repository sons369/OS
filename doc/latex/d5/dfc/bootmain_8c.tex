\hypertarget{bootmain_8c}{}\doxysection{bootmain.\+c 파일 참조}
\label{bootmain_8c}\index{bootmain.c@{bootmain.c}}
{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}elf.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}x86.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}memlayout.\+h\char`\"{}}\newline
bootmain.\+c에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{de/d8f/bootmain_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{매크로}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{bootmain_8c_af69dd8b281718a66b3e7a65250d24419}{S\+E\+C\+T\+S\+I\+ZE}}~512
\end{DoxyCompactItemize}
\doxysubsection*{함수}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{bootmain_8c_af8097ce47ae21ccad1b0afd6f48ef62c}{readseg}} (\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}} $\ast$, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})
\item 
void \mbox{\hyperlink{bootmain_8c_a0d198d492591e1b70a8a12109408a7e4}{bootmain}} (void)
\item 
void \mbox{\hyperlink{bootmain_8c_a63222d4a07c38c198de5bd116a001935}{waitdisk}} (void)
\item 
void \mbox{\hyperlink{bootmain_8c_ae7ef59ffa082283b72c54e43b7a16351}{readsect}} (void $\ast$dst, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} offset)
\end{DoxyCompactItemize}


\doxysubsection{매크로 문서화}
\mbox{\Hypertarget{bootmain_8c_af69dd8b281718a66b3e7a65250d24419}\label{bootmain_8c_af69dd8b281718a66b3e7a65250d24419}} 
\index{bootmain.c@{bootmain.c}!SECTSIZE@{SECTSIZE}}
\index{SECTSIZE@{SECTSIZE}!bootmain.c@{bootmain.c}}
\doxysubsubsection{\texorpdfstring{SECTSIZE}{SECTSIZE}}
{\footnotesize\ttfamily \#define S\+E\+C\+T\+S\+I\+ZE~512}



bootmain.\+c 파일의 13 번째 라인에서 정의되었습니다.



\doxysubsection{함수 문서화}
\mbox{\Hypertarget{bootmain_8c_a0d198d492591e1b70a8a12109408a7e4}\label{bootmain_8c_a0d198d492591e1b70a8a12109408a7e4}} 
\index{bootmain.c@{bootmain.c}!bootmain@{bootmain}}
\index{bootmain@{bootmain}!bootmain.c@{bootmain.c}}
\doxysubsubsection{\texorpdfstring{bootmain()}{bootmain()}}
{\footnotesize\ttfamily void bootmain (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



bootmain.\+c 파일의 18 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{19 \{}
\DoxyCodeLine{20   \textcolor{keyword}{struct }\mbox{\hyperlink{structelfhdr}{elfhdr}} *\mbox{\hyperlink{structelfhdr_a22ec6f2383f0488ee18a18673398f201}{elf}};}
\DoxyCodeLine{21   \textcolor{keyword}{struct }\mbox{\hyperlink{structproghdr}{proghdr}} *ph, *eph;}
\DoxyCodeLine{22   void (*entry)(void);}
\DoxyCodeLine{23   \mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}* pa;}
\DoxyCodeLine{24 }
\DoxyCodeLine{25   elf = (\textcolor{keyword}{struct }\mbox{\hyperlink{structelfhdr}{elfhdr}}*)0x10000;  \textcolor{comment}{// scratch space}}
\DoxyCodeLine{26 }
\DoxyCodeLine{27   \textcolor{comment}{// Read 1st page off disk}}
\DoxyCodeLine{28   \mbox{\hyperlink{bootmain_8c_af8097ce47ae21ccad1b0afd6f48ef62c}{readseg}}((\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}*)\mbox{\hyperlink{structelfhdr_a22ec6f2383f0488ee18a18673398f201}{elf}}, 4096, 0);}
\DoxyCodeLine{29 }
\DoxyCodeLine{30   \textcolor{comment}{// Is this an ELF executable?}}
\DoxyCodeLine{31   \textcolor{keywordflow}{if}(\mbox{\hyperlink{structelfhdr_a22ec6f2383f0488ee18a18673398f201}{elf}}-\/>magic != \mbox{\hyperlink{elf_8h_abb1c2e5626667aacc7b3efd269a6c0eb}{ELF\_MAGIC}})}
\DoxyCodeLine{32     \textcolor{keywordflow}{return};  \textcolor{comment}{// let bootasm.S handle error}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34   \textcolor{comment}{// Load each program segment (ignores ph flags).}}
\DoxyCodeLine{35   ph = (\textcolor{keyword}{struct }\mbox{\hyperlink{structproghdr}{proghdr}}*)((\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}*)elf + elf-\/>\mbox{\hyperlink{structelfhdr_a1d463f67fcf951c06cfaa37850004c51}{phoff}});}
\DoxyCodeLine{36   eph = ph + elf-\/>\mbox{\hyperlink{structelfhdr_a3eff58d58a3ee83aa53d7ffdebdb6b5b}{phnum}};}
\DoxyCodeLine{37   \textcolor{keywordflow}{for}(; ph < eph; ph++)\{}
\DoxyCodeLine{38     pa = (\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}*)ph-\/>\mbox{\hyperlink{structproghdr_af65905aa5c4ccb33aac7dad5783e14d9}{paddr}};}
\DoxyCodeLine{39     \mbox{\hyperlink{bootmain_8c_af8097ce47ae21ccad1b0afd6f48ef62c}{readseg}}(pa, ph-\/>\mbox{\hyperlink{structproghdr_a95dee0f1864ec1602f1ff6998ac00df0}{filesz}}, ph-\/>\mbox{\hyperlink{structproghdr_a979532386fd448596cc5046339a2cd2d}{off}});}
\DoxyCodeLine{40     \textcolor{keywordflow}{if}(ph-\/>\mbox{\hyperlink{structproghdr_a9f703ade191af1054b3de797d8167d89}{memsz}} > ph-\/>\mbox{\hyperlink{structproghdr_a95dee0f1864ec1602f1ff6998ac00df0}{filesz}})}
\DoxyCodeLine{41       \mbox{\hyperlink{x86_8h_a1947b1172a297dea9288e77a600425fb}{stosb}}(pa + ph-\/>\mbox{\hyperlink{structproghdr_a95dee0f1864ec1602f1ff6998ac00df0}{filesz}}, 0, ph-\/>\mbox{\hyperlink{structproghdr_a9f703ade191af1054b3de797d8167d89}{memsz}} -\/ ph-\/>\mbox{\hyperlink{structproghdr_a95dee0f1864ec1602f1ff6998ac00df0}{filesz}});}
\DoxyCodeLine{42   \}}
\DoxyCodeLine{43 }
\DoxyCodeLine{44   \textcolor{comment}{// Call the entry point from the ELF header.}}
\DoxyCodeLine{45   \textcolor{comment}{// Does not return!}}
\DoxyCodeLine{46   entry = (void(*)(void))(elf-\/>\mbox{\hyperlink{structelfhdr_ad40755e1b2c6efc3ec0ad95889f743a5}{entry}});}
\DoxyCodeLine{47   entry();}
\DoxyCodeLine{48 \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/dfc/bootmain_8c_a0d198d492591e1b70a8a12109408a7e4_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bootmain_8c_ae7ef59ffa082283b72c54e43b7a16351}\label{bootmain_8c_ae7ef59ffa082283b72c54e43b7a16351}} 
\index{bootmain.c@{bootmain.c}!readsect@{readsect}}
\index{readsect@{readsect}!bootmain.c@{bootmain.c}}
\doxysubsubsection{\texorpdfstring{readsect()}{readsect()}}
{\footnotesize\ttfamily void readsect (\begin{DoxyParamCaption}\item[{void $\ast$}]{dst,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{offset }\end{DoxyParamCaption})}



bootmain.\+c 파일의 60 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{61 \{}
\DoxyCodeLine{62   \textcolor{comment}{// Issue command.}}
\DoxyCodeLine{63   \mbox{\hyperlink{bootmain_8c_a63222d4a07c38c198de5bd116a001935}{waitdisk}}();}
\DoxyCodeLine{64   \mbox{\hyperlink{x86_8h_ae83f752beecce9c8f6f8711ff936377f}{outb}}(0x1F2, 1);   \textcolor{comment}{// count = 1}}
\DoxyCodeLine{65   \mbox{\hyperlink{x86_8h_ae83f752beecce9c8f6f8711ff936377f}{outb}}(0x1F3, offset);}
\DoxyCodeLine{66   \mbox{\hyperlink{x86_8h_ae83f752beecce9c8f6f8711ff936377f}{outb}}(0x1F4, offset >> 8);}
\DoxyCodeLine{67   \mbox{\hyperlink{x86_8h_ae83f752beecce9c8f6f8711ff936377f}{outb}}(0x1F5, offset >> 16);}
\DoxyCodeLine{68   \mbox{\hyperlink{x86_8h_ae83f752beecce9c8f6f8711ff936377f}{outb}}(0x1F6, (offset >> 24) | 0xE0);}
\DoxyCodeLine{69   \mbox{\hyperlink{x86_8h_ae83f752beecce9c8f6f8711ff936377f}{outb}}(0x1F7, 0x20);  \textcolor{comment}{// cmd 0x20 -\/ read sectors}}
\DoxyCodeLine{70 }
\DoxyCodeLine{71   \textcolor{comment}{// Read data.}}
\DoxyCodeLine{72   \mbox{\hyperlink{bootmain_8c_a63222d4a07c38c198de5bd116a001935}{waitdisk}}();}
\DoxyCodeLine{73   \mbox{\hyperlink{x86_8h_afa75519f8fc7778abeebd0b9bdc82569}{insl}}(0x1F0, dst, \mbox{\hyperlink{bootmain_8c_af69dd8b281718a66b3e7a65250d24419}{SECTSIZE}}/4);}
\DoxyCodeLine{74 \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=301pt]{d5/dfc/bootmain_8c_ae7ef59ffa082283b72c54e43b7a16351_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{d5/dfc/bootmain_8c_ae7ef59ffa082283b72c54e43b7a16351_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bootmain_8c_af8097ce47ae21ccad1b0afd6f48ef62c}\label{bootmain_8c_af8097ce47ae21ccad1b0afd6f48ef62c}} 
\index{bootmain.c@{bootmain.c}!readseg@{readseg}}
\index{readseg@{readseg}!bootmain.c@{bootmain.c}}
\doxysubsubsection{\texorpdfstring{readseg()}{readseg()}}
{\footnotesize\ttfamily void readseg (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}} $\ast$}]{pa,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{count,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{offset }\end{DoxyParamCaption})}



bootmain.\+c 파일의 79 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{80 \{}
\DoxyCodeLine{81   \mbox{\hyperlink{types_8h_a65f85814a8290f9797005d3b28e7e5fc}{uchar}}* epa;}
\DoxyCodeLine{82 }
\DoxyCodeLine{83   epa = pa + count;}
\DoxyCodeLine{84 }
\DoxyCodeLine{85   \textcolor{comment}{// Round down to sector boundary.}}
\DoxyCodeLine{86   pa -\/= offset \% \mbox{\hyperlink{bootmain_8c_af69dd8b281718a66b3e7a65250d24419}{SECTSIZE}};}
\DoxyCodeLine{87 }
\DoxyCodeLine{88   \textcolor{comment}{// Translate from bytes to sectors; kernel starts at sector 1.}}
\DoxyCodeLine{89   offset = (offset / \mbox{\hyperlink{bootmain_8c_af69dd8b281718a66b3e7a65250d24419}{SECTSIZE}}) + 1;}
\DoxyCodeLine{90 }
\DoxyCodeLine{91   \textcolor{comment}{// If this is too slow, we could read lots of sectors at a time.}}
\DoxyCodeLine{92   \textcolor{comment}{// We'd write more to memory than asked, but it doesn't matter -\/-\/}}
\DoxyCodeLine{93   \textcolor{comment}{// we load in increasing order.}}
\DoxyCodeLine{94   \textcolor{keywordflow}{for}(; pa < epa; pa += \mbox{\hyperlink{bootmain_8c_af69dd8b281718a66b3e7a65250d24419}{SECTSIZE}}, offset++)}
\DoxyCodeLine{95     \mbox{\hyperlink{bootmain_8c_ae7ef59ffa082283b72c54e43b7a16351}{readsect}}(pa, offset);}
\DoxyCodeLine{96 \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/dfc/bootmain_8c_af8097ce47ae21ccad1b0afd6f48ef62c_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=235pt]{d5/dfc/bootmain_8c_af8097ce47ae21ccad1b0afd6f48ef62c_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{bootmain_8c_a63222d4a07c38c198de5bd116a001935}\label{bootmain_8c_a63222d4a07c38c198de5bd116a001935}} 
\index{bootmain.c@{bootmain.c}!waitdisk@{waitdisk}}
\index{waitdisk@{waitdisk}!bootmain.c@{bootmain.c}}
\doxysubsubsection{\texorpdfstring{waitdisk()}{waitdisk()}}
{\footnotesize\ttfamily void waitdisk (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



bootmain.\+c 파일의 51 번째 라인에서 정의되었습니다.


\begin{DoxyCode}{0}
\DoxyCodeLine{52 \{}
\DoxyCodeLine{53   \textcolor{comment}{// Wait for disk ready.}}
\DoxyCodeLine{54   \textcolor{keywordflow}{while}((\mbox{\hyperlink{x86_8h_a2866d9720d8f4b0e23530f79171dfba9}{inb}}(0x1F7) \& 0xC0) != 0x40)}
\DoxyCodeLine{55     ;}
\DoxyCodeLine{56 \}}

\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=206pt]{d5/dfc/bootmain_8c_a63222d4a07c38c198de5bd116a001935_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d5/dfc/bootmain_8c_a63222d4a07c38c198de5bd116a001935_icgraph}
\end{center}
\end{figure}
